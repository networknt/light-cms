CREATE CLASS Blog extends V;
CREATE PROPERTY Blog.blogId STRING;
CREATE PROPERTY Blog.host STRING;
CREATE PROPERTY Blog.desc STRING;
CREATE PROPERTY Blog.attributes EMBEDDEDMAP;
CREATE PROPERTY Blog.rank INTEGER;
CREATE PROPERTY Blog.createDate DATETIME;
CREATE PROPERTY Blog.updateDate DATETIME;
CREATE INDEX Blog.blogId ON Blog(blogId) UNIQUE;
CREATE INDEX Blog.host ON Blog(host) NOTUNIQUE;
CREATE INDEX Blog.updateDate ON Blog(updateDate) UNIQUE;

edge Own, UpVote, DownVote, Create, Update, Post(new)

CREATE CLASS Forum extends V;
CREATE PROPERTY Forum.forumId STRING;
CREATE PROPERTY Forum.host STRING;
CREATE PROPERTY Forum.desc STRING;
CREATE PROPERTY Forum.attributes EMBEDDEDMAP;
CREATE PROPERTY Forum.rank INTEGER;
CREATE PROPERTY Forum.createDate DATETIME;
CREATE PROPERTY Forum.updateDate DATETIME;
CREATE INDEX Forum.blogId ON Forum(forumId) UNIQUE;
CREATE INDEX Forum.host ON Forum(host) NOTUNIQUE;
CREATE INDEX Forum.updateDate ON Forum(updateDate) UNIQUE;

CREATE CLASS News extends V;
CREATE PROPERTY News.newsId STRING;
CREATE PROPERTY News.host STRING;
CREATE PROPERTY News.desc STRING;
CREATE PROPERTY News.attributes EMBEDDEDMAP;
CREATE PROPERTY News.rank INTEGER;
CREATE PROPERTY News.createDate DATETIME;
CREATE PROPERTY News.updateDate DATETIME;
CREATE INDEX News.newsId ON News(newsId) UNIQUE;
CREATE INDEX News.host ON News(host) NOTUNIQUE;
CREATE INDEX News.updateDate ON News(updateDate) UNIQUE;


CREATE CLASS Post;
CREATE PROPERTY Post.host STRING;
CREATE PROPERTY Post.id STRING;
CREATE PROPERTY Post.parent LINK;
CREATE PROPERTY Post.title STRING;
CREATE PROPERTY Post.source STRING;
CREATE PROPERTY Post.content STRING;
CREATE PROPERTY Post.tags LINKMAP;
CREATE PROPERTY Post.upUsers LINKSET;
CREATE PROPERTY Post.downUsers LINKSET;
CREATE PROPERTY Post.rank INTEGER;
CREATE PROPERTY Post.children LINKLIST;
CREATE PROPERTY Post.createDate DATETIME;
CREATE PROPERTY Post.createUserId STRING;
CREATE PROPERTY Post.updateDate DATETIME;
CREATE INDEX Post.id ON Post(id) UNIQUE;
CREATE INDEX Post.updateDate ON Post(updateDate) NOTUNIQUE;

CREATE CLASS Comment;
CREATE PROPERTY Comment.host STRING;
CREATE PROPERTY Comment.id STRING;
CREATE PROPERTY Comment.parent LINK;
CREATE PROPERTY Comment.title STRING;
CREATE PROPERTY Comment.source STRING;
CREATE PROPERTY Comment.content STRING;
CREATE PROPERTY Comment.tags LINKMAP;
CREATE PROPERTY Comment.upUsers LINKSET;
CREATE PROPERTY Comment.downUsers LINKSET;
CREATE PROPERTY Comment.rank INTEGER;
CREATE PROPERTY Comment.children LINKLIST;
CREATE PROPERTY Comment.createDate DATETIME;
CREATE PROPERTY Comment.createUserId STRING;
CREATE PROPERTY Comment.updateDate DATETIME;
CREATE INDEX Comment.id ON Comment(id) UNIQUE;
CREATE INDEX Comment.updateDate ON Comment(updateDate) NOTUNIQUE;


CREATE CLASS Tag;
CREATE PROPERTY Tag.host STRING;
CREATE PROPERTY Tag.name STRING;
CREATE PROPERTY Tag.class STRING;
CREATE PROPERTY Tag.links LINKSET;
CREATE PROPERTY Tag.createDate DATETIME;
CREATE PROPERTY Tag.createUserId STRING;
CREATE PROPERTY Tag.updateDate DATETIME;
CREATE INDEX hostNameClassIdx ON Tag(host, name, class) UNIQUE;

insert into Role(id,desc) VALUES ('blogAdmin','Blog Admin'),('forumAdmin','Forum Admin'),('newsAdmin','News Admin');

insert into MenuItem(id, label, path) values ('blogAdmin', 'Blog Admin', '/page/com-networknt-light-v-blog-admin-home'),('forumAdmin', 'Forum Admin', '/page/com-networknt-light-v-forum-admin-home'),('newsAdmin', 'News Admin', '/page/com-networknt-light-v-news-admin-home');

insert into MenuItem(id, label, path, left, roles) values ('blog', 'Blog', '/page/com-networknt-light-v-blog-home', true, 'user'),('forum', 'Forum', '/page/com-networknt-light-v-news-home', true, 'user'),('news', 'News', '/page/com-networknt-light-v-forum-home', true, 'user');

update MenuItem add menuItems=(select from MenuItem where id = 'blogAdmin') where id = 'admin';
update MenuItem add menuItems=(select from MenuItem where id = 'forumAdmin') where id = 'admin';
update MenuItem add menuItems=(select from MenuItem where id = 'newsAdmin') where id = 'admin';

update Menu add menuItems=(select from MenuItem where id = 'blog') where host = 'www.networknt.com';
update Menu add menuItems=(select from MenuItem where id = 'forum') where host = 'www.networknt.com';
update Menu add menuItems=(select from MenuItem where id = 'news') where host = 'www.networknt.com';

update Menu add menuItems=(select from MenuItem where id = 'blog') where host = 'www.edibleforestgarden.ca';
update Menu add menuItems=(select from MenuItem where id = 'forum') where host = 'www.edibleforestgarden.ca';
update Menu add menuItems=(select from MenuItem where id = 'news') where host = 'www.edibleforestgarden.ca';

update Menu add menuItems=(select from MenuItem where id = 'blog') where host = 'example';
update Menu add menuItems=(select from MenuItem where id = 'forum') where host = 'example';
update Menu add menuItems=(select from MenuItem where id = 'news') where host = 'example';





