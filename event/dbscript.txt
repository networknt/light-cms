CREATE CLASS Blog extends V;
CREATE PROPERTY Blog.host STRING;
CREATE PROPERTY Blog.blogId STRING;
CREATE PROPERTY Blog.desc STRING;
CREATE PROPERTY Blog.attributes EMBEDDEDMAP;
CREATE PROPERTY Blog.rank INTEGER;
CREATE PROPERTY Blog.createDate DATETIME;
CREATE PROPERTY Blog.updateDate DATETIME;
CREATE INDEX blogHostIdIdx ON Blog(host, blogId) UNIQUE;
CREATE INDEX Blog.updateDate ON Blog(updateDate) NOTUNIQUE;

CREATE CLASS Forum extends V;
CREATE PROPERTY Forum.host STRING;
CREATE PROPERTY Forum.forumId STRING;
CREATE PROPERTY Forum.desc STRING;
CREATE PROPERTY Forum.attributes EMBEDDEDMAP;
CREATE PROPERTY Forum.rank INTEGER;
CREATE PROPERTY Forum.createDate DATETIME;
CREATE PROPERTY Forum.updateDate DATETIME;
CREATE INDEX forumHostIdIdx ON Forum(host, forumId) UNIQUE;
CREATE INDEX Forum.updateDate ON Forum(updateDate) NOTUNIQUE;

CREATE CLASS News extends V;
CREATE PROPERTY News.host STRING;
CREATE PROPERTY News.newsId STRING;
CREATE PROPERTY News.desc STRING;
CREATE PROPERTY News.attributes EMBEDDEDMAP;
CREATE PROPERTY News.rank INTEGER;
CREATE PROPERTY News.createDate DATETIME;
CREATE PROPERTY News.updateDate DATETIME;
CREATE INDEX newsHostIdIdx ON News(host, newsId) UNIQUE;
CREATE INDEX News.updateDate ON News(updateDate) NOTUNIQUE;


CREATE CLASS Post extends V;
CREATE PROPERTY Post.postId STRING;
CREATE PROPERTY Post.host STRING;
CREATE PROPERTY Post.title STRING;
CREATE PROPERTY Post.source STRING;
CREATE PROPERTY Post.summary STRING;
CREATE PROPERTY Post.content STRING;
CREATE PROPERTY Post.rank INTEGER;
CREATE PROPERTY Post.createDate DATETIME;
CREATE PROPERTY Post.updateDate DATETIME;
CREATE INDEX Post.postId ON Post(postId) UNIQUE;
CREATE INDEX Post.host ON Post(host) NOTUNIQUE;
CREATE INDEX Post.updateDate ON Post(updateDate) NOTUNIQUE;

CREATE CLASS Comment extends V;
CREATE PROPERTY Comment.commentId STRING;
CREATE PROPERTY Comment.host STRING;
CREATE PROPERTY Comment.title STRING;
CREATE PROPERTY Comment.source STRING;
CREATE PROPERTY Comment.content STRING;
CREATE PROPERTY Comment.rank INTEGER;
CREATE PROPERTY Comment.createDate DATETIME;
CREATE PROPERTY Comment.updateDate DATETIME;
CREATE INDEX Comment.commentId ON Comment(commentId) UNIQUE;
CREATE INDEX Comment.host ON Comment(host) NOTUNIQUE;
CREATE INDEX Comment.updateDate ON Comment(updateDate) NOTUNIQUE;


CREATE CLASS Tag extends V;
CREATE PROPERTY Tag.host STRING;
CREATE PROPERTY Tag.tagId STRING;
CREATE PROPERTY Tag.desc STRING;
CREATE PROPERTY Tag.createDate DATETIME;
CREATE INDEX tagHostIdIdx ON Tag(host, tagId) UNIQUE;

CREATE CLASS HasPost extends E;
CREATE CLASS HasTag extends E;


insert into Role(id,desc) VALUES ('blogAdmin','Blog Admin'),('forumAdmin','Forum Admin'),('newsAdmin','News Admin');

insert into MenuItem(id, label, path) values ('blogAdmin', 'Blog Admin', '/page/com-networknt-light-v-blog-admin-home'),('forumAdmin', 'Forum Admin', '/page/com-networknt-light-v-forum-admin-home'),('newsAdmin', 'News Admin', '/page/com-networknt-light-v-news-admin-home');

insert into MenuItem(id, label, path, left, roles) values ('blog', 'Blog', '/page/com-networknt-light-v-blog-home', true, 'user'),('forum', 'Forum', '/page/com-networknt-light-v-news-home', true, 'user'),('news', 'News', '/page/com-networknt-light-v-forum-home', true, 'user');

update MenuItem add menuItems=(select from MenuItem where id = 'blogAdmin') where id = 'admin';
update MenuItem add menuItems=(select from MenuItem where id = 'forumAdmin') where id = 'admin';
update MenuItem add menuItems=(select from MenuItem where id = 'newsAdmin') where id = 'admin';

update Menu add menuItems=(select from MenuItem where id = 'blog') where host = 'www.networknt.com';
update Menu add menuItems=(select from MenuItem where id = 'forum') where host = 'www.networknt.com';
update Menu add menuItems=(select from MenuItem where id = 'news') where host = 'www.networknt.com';

update Menu add menuItems=(select from MenuItem where id = 'blog') where host = 'www.edibleforestgarden.ca';
update Menu add menuItems=(select from MenuItem where id = 'forum') where host = 'www.edibleforestgarden.ca';
update Menu add menuItems=(select from MenuItem where id = 'news') where host = 'www.edibleforestgarden.ca';

update Menu add menuItems=(select from MenuItem where id = 'blog') where host = 'example';
update Menu add menuItems=(select from MenuItem where id = 'forum') where host = 'example';
update Menu add menuItems=(select from MenuItem where id = 'news') where host = 'example';





