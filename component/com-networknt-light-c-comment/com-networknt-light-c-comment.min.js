angular.module("lightApp").provider("commentsConfig",function(){function e(e,t){"string"==typeof t&&(m[e]=t)}function t(e,t){m[e]=t&&(angular.isString(t)&&t.length||angular.isFunction(t)||angular.isArray(t))?t:o}function n(e,t){"number"==typeof t&&(m[e]=t)}var m={containerTemplate:"template/comments/comments.html",commentTemplate:"template/comments/comment.html",orderBy:"best",commentController:void 0,depthLimit:5},o=function(){},c={containerTemplate:e,commentTemplate:e,orderBy:e,commentController:t,depthLimit:n};this.$get=function(){return m},this.set=function(e,t){var n,m,o,r;if("string"==typeof e)n=c[e],n&&n(e,t);else if("object"==typeof e)for(o=Object.keys(e),r=0;r<o.length;++r)m=o[r],n=c[m],n&&n(m,e[m])}}).directive("comments",function(e,t,n){return{restrict:"EA",require:"?^comment",transclude:!0,replace:!0,templateUrl:function(){return n.containerTemplate},scope:{comments:"=commentData"},controller:function(){},link:{pre:function(e,m,o,c){var r=m.controller("comments"),i=c?c.comments:null;if(i)r.commentsDepth=i.commentsDepth+1,r.commentsRoot=i.commentsRoot,r.commentsParent=i;else{r.commentsDepth=1,r.commentsRoot=null;var l=angular.isDefined(o.commentDepthLimit)?o.commentDepthLimit:n.depthLimit;"string"==typeof l&&(l=t(l,!1)(e.$parent),"string"==typeof l&&(l=parseInt(l,10))),("number"!=typeof l||l!==l)&&(l=0),r.commentsDepthLimit=l}e.commentsDepth=r.commentsDepth,o.$observe("orderBy",function(t){e.commentOrder=t||n.orderBy})}}}}).directive("comment",function(e,t,n,m){return{require:["^comments","comment"],restrict:"EA",transclude:!0,replace:!0,templateUrl:function(){return t.commentTemplate},scope:{comment:"=commentData"},controller:function(){},link:function(o,c,r,i){function l(e,t,n){if(a){var o,c,r=e.$$listeners[t]||[],i=[n];for(o=0,c=r.length;c>o;o++)if(r[o])try{r[o].apply(null,i)}catch(l){m(l)}else r.splice(o,1),o--,c--}}function s(e){if(angular.isArray(e)||(e=[]),e.length>0&&!g){if(u.commentsDepth>=(u.commentsRoot||u).commentsDepthLimit)return void l(o,"$depthLimitComments",o.comment);f=v(o,function(e){p.commentsTransclude?(h=p.commentsTransclude.clone(!0),p.commentsTransclude.replaceWith(e)):c.append(e)}),g=!0,l(o,"$filledNestedComments",f)}else!e.length&&g&&(g=!1,p.commentsTransclude&&h?f.replaceWith(h):f.remove(),l(o,"$emptiedNestedComments",p.commentsTransclude||c),h=f=void 0)}var a,u=i[0],p=i[1],d=t.commentController;o.commentDepth=u.commentsDepth,o.commentDepthLimit=(u.commentsRoot||u).commentsDepthLimit,p.comments=u,d&&(a=n(d,{$scope:o,$element:c}),a&&c.data("$CommentController",a)),"true"===c.parent().attr("child-comments")&&c.addClass("child-comment");var f,h,g=!1,v=e('<div comments child-comments="true" comment-data="comment.children"></div>');o.$watch("comment",function(){s(o.comment.children)},!0)}}}).directive("commentsTransclude",function(){return{restrict:"EA",require:"^comment",link:function(e,t,n,m){n.$addClass("comments-transclude"),m.commentsTransclude=t}}}),function(e){"use strict";e.module("lightApp").directive("myCustomer",function(){return{templateUrl:"tpl/my-customer.html"}})}(window.angular);